! function(e) {
    var t = {};

    function n(r) { if (t[r]) return t[r].exports; var s = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(s.exports, s, s.exports, n), s.l = !0, s.exports }
    n.m = e, n.c = t, n.d = function(e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, n.r = function(e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var r = Object.create(null);
        if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e)
            for (var s in e) n.d(r, s, function(t) { return e[t] }.bind(null, s));
        return r
    }, n.n = function(e) { var t = e && e.__esModule ? function() { return e.default } : function() { return e }; return n.d(t, "a", t), t }, n.o = function(e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "Section11/dist", n(n.s = 0)
}([function(e, t, n) {
    "use strict";
    n.r(t);
    class r {
        constructor(e, t, n, r) {
            this.attachPosition = n, this.templateElement = document.getElementById(e), this.hostElement = document.getElementById(t);
            const s = document.importNode(this.templateElement.content, !0);
            this.element = s.firstElementChild, r && (this.element.id = r), this.attach()
        }
        attach() { this.hostElement.insertAdjacentElement(this.attachPosition, this.element) }
    }

    function s(e, t, n) { const r = n.value; return { configurable: !0, get() { return r.bind(this) } } }
    var i;
    ! function(e) { e[e.Active = 0] = "Active", e[e.Finished = 1] = "Finished" }(i || (i = {}));
    class o { constructor(e, t, n, r, s) { this.projectId = e, this.title = t, this.description = n, this.numOfPeople = r, this.status = s } }
    class l extends class {
        constructor() { this.listeners = [] }
        addListener(e) { this.listeners.push(e) }
    } {
        constructor() { super(), this.projects = [] }
        static getInstance() { return this.instance || (this.instance = new l), this.instance }
        addProject(e, t, n) {
            const r = new o(Math.random().toString(), e, t, n, i.Active);
            this.projects.push(r), this.updateListeners()
        }
        moveProject(e, t) {
            const n = this.projects.find(t => t.projectId === e);
            n && n.status !== t && (n.status = t, this.updateListeners())
        }
        updateListeners() { for (const e of this.listeners) e(this.projects.slice()) }
    }
    console.log("Project State Created");
    const a = l.getInstance();

    function c(e) { let t = !0; return e.required && (t = t && 0 !== e.value.toString().trim().length), "string" == typeof e.value && (null != e.minLength && (t = t && e.value.length >= e.minLength), null != e.maxLength && (t = t && e.value.length <= e.maxLength)), "number" == typeof e.value && (null != e.min && (t = t && e.value >= e.min), null != e.max && (t = t && e.value <= e.max)), t }
    var u = function(e, t, n, r) {
        var s, i = arguments.length,
            o = i < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, n) : r;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, n, r);
        else
            for (var l = e.length - 1; l >= 0; l--)(s = e[l]) && (o = (i < 3 ? s(o) : i > 3 ? s(t, n, o) : s(t, n)) || o);
        return i > 3 && o && Object.defineProperty(t, n, o), o
    };
    class d extends r {
        constructor() { super("project-input", "app", "afterbegin", "user-input"), this.titleInputElement = this.element.querySelector("#title"), this.descriptionInputElement = this.element.querySelector("#description"), this.peopleInputElement = this.element.querySelector("#people"), this.configure() }
        renderContent() {}
        submitHandler(e) {
            e.preventDefault();
            const t = this.gatherUserInput();
            if (Array.isArray(t)) {
                const [e, n, r] = t;
                console.log("title is : " + e + " description is : " + n + " no of people is : " + r), a.addProject(e, n, r)
            }
            this.clearUserInput()
        }
        clearUserInput() { this.titleInputElement.value = "", this.descriptionInputElement.value = "", this.peopleInputElement.value = "" }
        gatherUserInput() {
            const e = this.titleInputElement.value,
                t = this.descriptionInputElement.value,
                n = this.peopleInputElement.value,
                r = { value: t, required: !0, minLength: 5 },
                s = { value: +n, required: !0, min: 1, max: 5 };
            if (c({ value: e, required: !0 }) && c(r) && c(s)) return [e, t, +n];
            alert("Invalid input please try again!!!!")
        }
        configure() { this.element.addEventListener("submit", this.submitHandler) }
    }
    u([s], d.prototype, "submitHandler", null);
    var p = function(e, t, n, r) {
        var s, i = arguments.length,
            o = i < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, n) : r;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, n, r);
        else
            for (var l = e.length - 1; l >= 0; l--)(s = e[l]) && (o = (i < 3 ? s(o) : i > 3 ? s(t, n, o) : s(t, n)) || o);
        return i > 3 && o && Object.defineProperty(t, n, o), o
    };
    class h extends r {
        constructor(e, t) { super("single-project", e, "beforeend", t.projectId), this.project = t, this.configure(), this.renderContent() }
        get persons() { return 1 === this.project.numOfPeople ? "1 person" : this.project.numOfPeople + " persons" }
        dragStartHandler(e) { e.dataTransfer.setData("text/plain", this.project.projectId), e.dataTransfer.effectAllowed = "move" }
        dragEndHandler(e) { console.log("drag end", e) }
        configure() { this.element.addEventListener("dragstart", this.dragStartHandler) }
        renderContent() { this.element.querySelector("h2").textContent = this.project.title, this.element.querySelector("h3").textContent = this.persons + " assigned", this.element.querySelector("p").textContent = this.project.description }
    }
    p([s], h.prototype, "dragStartHandler", null);
    var f = function(e, t, n, r) {
        var s, i = arguments.length,
            o = i < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, n) : r;
        if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, n, r);
        else
            for (var l = e.length - 1; l >= 0; l--)(s = e[l]) && (o = (i < 3 ? s(o) : i > 3 ? s(t, n, o) : s(t, n)) || o);
        return i > 3 && o && Object.defineProperty(t, n, o), o
    };
    class m extends r {
        constructor(e) { super("project-list", "app", "beforeend", e + "-projects"), this.type = e, this.assignedProjects = [], this.configure(), this.renderContent() }
        dragOverHandler(e) {
            if (e.dataTransfer && "text/plain" === e.dataTransfer.types[0]) {
                e.preventDefault();
                this.element.querySelector("ul").classList.add("droppable")
            }
        }
        dropHandler(e) {
            const t = e.dataTransfer.getData("text/plain");
            a.moveProject(t, "active" === this.type ? i.Active : i.Finished);
            this.element.querySelector("ul").classList.remove("droppable")
        }
        dragLeaveHandler(e) { this.element.querySelector("ul").classList.remove("droppable") }
        configure() {
            this.element.addEventListener("dragover", this.dragOverHandler), this.element.addEventListener("drop", this.dropHandler), this.element.addEventListener("dragleave", this.dragLeaveHandler), a.addListener(e => {
                const t = e.filter(e => "active" === this.type ? e.status === i.Active : e.status === i.Finished);
                this.assignedProjects = t, this.renderProjects()
            })
        }
        renderProjects() { document.getElementById(this.type + "-projects-list").innerHTML = ""; for (const e of this.assignedProjects) new h(this.element.querySelector("ul").id, e) }
        renderContent() {
            const e = this.type + "-projects-list";
            this.element.querySelector("ul").id = e, this.element.querySelector("h2").textContent = this.type.toUpperCase() + " PROJECTS"
        }
    }
    f([s], m.prototype, "dragOverHandler", null), f([s], m.prototype, "dropHandler", null), f([s], m.prototype, "dragLeaveHandler", null), new d, new m("active"), new m("finished"), console.log(), console.log("heyaaaaaaaa!!!!!!!uuuuuuuu")
}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vU2VjdGlvbjExL3NyYy9jb21wb25lbnRzL2Jhc2UtY29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL1NlY3Rpb24xMS9zcmMvZGVjb3JhdG9ycy9hdXRvYmluZC50cyIsIndlYnBhY2s6Ly8vLi9TZWN0aW9uMTEvc3JjL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovLy8uL1NlY3Rpb24xMS9zcmMvc3RhdGUvcHJvamVjdC1zdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9TZWN0aW9uMTEvc3JjL3V0aWwvdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9TZWN0aW9uMTEvc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9TZWN0aW9uMTEvc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pdGVtLnRzIiwid2VicGFjazovLy8uL1NlY3Rpb24xMS9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4vU2VjdGlvbjExL3NyYy9hcHAudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDb21wb25lbnQiLCJ0ZW1wbGF0ZUlkIiwiaG9zdElkIiwiYXR0YWNoUG9zaXRpb24iLCJlbGVtZW50SWQiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEFkamFjZW50RWxlbWVudCIsImF1dG9iaW5kIiwiX3RhcmdldCIsIl9tZXRob2ROYW1lIiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwiY29uZmlndXJhYmxlIiwiUHJvamVjdFN0YXR1cyIsIlByb2plY3QiLCJwcm9qZWN0SWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibnVtT2ZQZW9wbGUiLCJzdGF0dXMiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lciIsInB1c2giLCJzdXBlciIsInByb2plY3RzIiwiaW5zdGFuY2UiLCJuZXdQcm9qZWN0IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiQWN0aXZlIiwidXBkYXRlTGlzdGVuZXJzIiwibmV3U3RhdHVzIiwicHJvamVjdCIsImZpbmQiLCJwcmoiLCJsaXN0ZW5lckZuIiwic2xpY2UiLCJjb25zb2xlIiwibG9nIiwicHJvamVjdFN0YXRlIiwiZ2V0SW5zdGFuY2UiLCJ2YWxpZGF0ZSIsInZhbGlkYXRlYmxlSW5wdXQiLCJpc1ZhbGlkIiwicmVxdWlyZWQiLCJ0cmltIiwibGVuZ3RoIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibWluIiwibWF4IiwidGl0bGVJbnB1dEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQiLCJwZW9wbGVJbnB1dEVsZW1lbnQiLCJjb25maWd1cmUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidXNlcklucHV0IiwiZ2F0aGVyVXNlcklucHV0IiwiQXJyYXkiLCJpc0FycmF5IiwicGVvcGxlIiwiYWRkUHJvamVjdCIsImNsZWFyVXNlcklucHV0IiwidGl0bGVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJwZW9wbGVJbnB1dCIsInZhbGlkYXRhYmxlRGVzY3JpcHRpb24iLCJ2YWxpZGF0YWJsZVBlb3BsZSIsImFsZXJ0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1Ym1pdEhhbmRsZXIiLCJyZW5kZXJDb250ZW50IiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImVmZmVjdEFsbG93ZWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwidGV4dENvbnRlbnQiLCJwZXJzb25zIiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImdldERhdGEiLCJtb3ZlUHJvamVjdCIsIkZpbmlzaGVkIiwicmVtb3ZlIiwiZHJhZ092ZXJIYW5kbGVyIiwiZHJvcEhhbmRsZXIiLCJkcmFnTGVhdmVIYW5kbGVyIiwiYWRkTGlzdGVuZXIiLCJyZWxldmFudFByb2plY3RzIiwiZmlsdGVyIiwicmVuZGVyUHJvamVjdHMiLCJpbm5lckhUTUwiLCJsaXN0SWQiLCJ0b1VwcGVyQ2FzZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlC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QUt3RixpQkFBbUJZLEVBRXhCcEcsS0FBS3NHLG1CQUlELGlCQUVjcEcsU0FBU0MsZUFDeEJILEtBQUt1RixLQUFSLGtCQUdVZ0IsVUFBWSxHQUV4QixJQUFLLE1BQU1oRSxLQUFXdkMsS0FBS3dGLGlCQUV6QixJQUFJLEVBQVl4RixLQUFLUSxRQUFRbUQsY0FBYyxNQUFPakQsR0FBSTZCLEdBRzFELGdCQUVFLE1BQU1pRSxFQUFZeEcsS0FBS3VGLEtBQVIsaUJBRWZ2RixLQUFLUSxRQUFRbUQsY0FBYyxNQUFPakQsR0FBSzhGLEVBRXZDeEcsS0FBS1EsUUFBUW1ELGNBQWMsTUFBTzBCLFlBQ2hDckYsS0FBS3VGLEtBQUtrQixjQUFnQixhQXhFOUIsR0FEQzVGLEcsb0NBYUQsR0FEQ0EsRyxnQ0FhRCxHQURDQSxHLHFDQzFDSCxJQUFJLEVBQ0osSUFBSSxFQUFZLFVBQ2hCLElBQUksRUFBWSxZQUNoQitCLFFBQVFDLE1BQ1JELFFBQVFDLElBQUkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJTZWN0aW9uMTEvZGlzdFwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NvbXBvbmVudCBiYXNlIGNhbHNzXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnQ8VCBleHRlbmRzIEhUTUxFbGVtZW50LCBVIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IHtcclxuICB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgaG9zdEVsZW1lbnQ6IFQ7XHJcbiAgZWxlbWVudDogVTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHRlbXBsYXRlSWQ6IHN0cmluZyxcclxuICAgIGhvc3RJZDogc3RyaW5nLFxyXG4gICAgcHJpdmF0ZSBhdHRhY2hQb3NpdGlvbjpcclxuICAgICAgfCAnYmVmb3JlZW5kJ1xyXG4gICAgICB8ICdiZWZvcmViZWdpbidcclxuICAgICAgfCAnYWZ0ZXJiZWdpbidcclxuICAgICAgfCAnYWZ0ZXJlbmQnLFxyXG4gICAgZWxlbWVudElkPzogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICAvL2dldCBhY2Nlc3MgdG8gdGVtcGxhdGUgYW5kIGhvc3QgZWxlbWVudFxyXG4gICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgdGVtcGxhdGVJZFxyXG4gICAgKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChob3N0SWQpISBhcyBUO1xyXG5cclxuICAgIC8vaW1wb3J0IGNvbnRlbnQgZnJvbSB0ZW1wbGF0ZVxyXG4gICAgY29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShcclxuICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICAgIC8vYWNjZXNzIHRoZSBlbGVtZW50XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBpbXBvcnRlZE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVTtcclxuICAgIC8vQWRkIGlkXHJcbiAgICBpZiAoZWxlbWVudElkKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5pZCA9IGVsZW1lbnRJZDtcclxuICAgIH1cclxuICAgIC8vYWRkIGVsZW1lbnQgdG8gZG9tXHJcbiAgICB0aGlzLmF0dGFjaCgpO1xyXG4gIH1cclxuICBwcml2YXRlIGF0dGFjaCgpIHtcclxuICAgIC8vYWRkIGVsZW1lbnQgdG8gaG9zdFxyXG4gICAgdGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQodGhpcy5hdHRhY2hQb3NpdGlvbiwgdGhpcy5lbGVtZW50KTtcclxuICB9XHJcbiAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcbiAgYWJzdHJhY3QgcmVuZGVyQ29udGVudCgpOiB2b2lkO1xyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBhdXRvYmluZChcclxuICBfdGFyZ2V0OiBhbnksXHJcbiAgX21ldGhvZE5hbWU6IHN0cmluZyxcclxuICBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3JcclxuKSB7XHJcbiAgLy9nZXQgaGFuZGxlIHRvIG9yaWdpbmFsIG1ldGhvZFxyXG4gIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcclxuICAvL2NyZWF0ZSBhZGp1c3RlZCBwcm9wZXJ0eURlc2NyaXB0b3JcclxuICBjb25zdCBhZGp1c3RlZERlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcclxuICAgIC8vc2V0IGl0IHRvIGNvbmZpZ3VyYWJsZVxyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgLy9jcmVhdGUgYSBnZXR0ZXJcclxuICAgIGdldCgpIHtcclxuICAgICAgLy9jcmVhdGUgdGhlIGJvdW5kIGZ1bmN0aW9uXHJcbiAgICAgIGNvbnN0IGJvdW5kRnVuY3Rpb24gPSBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG4gICAgICAvL3JldHVybiB0aGUgYm91bmQgZnVuY3Rpb25cclxuICAgICAgcmV0dXJuIGJvdW5kRnVuY3Rpb247XHJcbiAgICB9XHJcbiAgfTtcclxuICAvL3JldHVybiB0aGUgYWRqdXN0ZWQgZGVzY3JpcHRvclxyXG4gIHJldHVybiBhZGp1c3RlZERlc2NyaXB0b3I7XHJcbn1cclxuIiwiLy9Qcm9qZWN0IFN0YXR1c1xyXG5leHBvcnQgZW51bSBQcm9qZWN0U3RhdHVzIHtcclxuICBBY3RpdmUsXHJcbiAgRmluaXNoZWRcclxufVxyXG4vL1Byb2plY3RcclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHByb2plY3RJZDogc3RyaW5nLFxyXG4gICAgcHVibGljIHRpdGxlOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgIHB1YmxpYyBudW1PZlBlb3BsZTogbnVtYmVyLFxyXG4gICAgcHVibGljIHN0YXR1czogUHJvamVjdFN0YXR1c1xyXG4gICkge31cclxufVxyXG4iLCJpbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5cclxuLy9UeXBlIGZvciBsaXN0ZW5lcnNcclxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkO1xyXG4vL0Jhc2Ugc3RhdGUgY2xhc3NcclxuYWJzdHJhY3QgY2xhc3MgU3RhdGU8VD4ge1xyXG4gIC8vZmllbGQgZm9yIGxpc3RlbmVyc1xyXG4gIHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuICAvLyBtZXRob2QgdG8gcmVnaXN0ZXIgYSBuZXcgbGlzdGVuZXJcclxuICBhZGRMaXN0ZW5lcihsaXN0ZW5lcjogTGlzdGVuZXI8VD4pIHtcclxuICAgIC8vYWRkIHRoZSBsaXN0ZW5lciB0byBsaXN0ZW5lcnMgYXJyYXlcclxuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gIH1cclxufVxyXG4vL1Byb2plY3QgU3RhdGUgTWFuYWdlbWVudFxyXG5leHBvcnQgY2xhc3MgUHJvamVjdFN0YXRlIGV4dGVuZHMgU3RhdGU8UHJvamVjdD4ge1xyXG4gIC8vZmllbGQgdG8gc3RvcmUgcHJvamVjdHNcclxuICBwcml2YXRlIHByb2plY3RzOiBQcm9qZWN0W10gPSBbXTtcclxuXHJcbiAgLy9wcml2YXRlIGluc3RhbmNlXHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFByb2plY3RTdGF0ZTtcclxuICAvL3ByaXZhdGUgY29uc3RydWN0b3Igc28gdGhhdCBjbGFzcyBjYW50IGJlIGluc3RhbnRpYXRlZCBmcm9tIG91dHNpZGVcclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuICB9XHJcbiAgLy9zdGF0aWMgbWV0aG9kIHRvIGdldCBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFByb2plY3RTdGF0ZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vcHVibGljIG1ldGhvZCB0byBhZGRQcm9qZWN0cyB0byBhYm92ZSBhcnJheVxyXG4gIGFkZFByb2plY3QodGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgbnVtT2ZQZW9wbGU6IG51bWJlcikge1xyXG4gICAgLy9jcmVhdGUgYSBuZXcgcHJvamVjdFxyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KFxyXG4gICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksXHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgbnVtT2ZQZW9wbGUsXHJcbiAgICAgIFByb2plY3RTdGF0dXMuQWN0aXZlXHJcbiAgICApO1xyXG4gICAgLy9hZGQgdGhpcyBwcm9qZWN0IHRvIHByb2plY3RzIGFycmF5XHJcbiAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XHJcbiAgICAvL2NhbGwgYWxsIGxpc3RlbmVyIGZ1bmN0aW9ucyB3aGVuZXZlciBhIG5ldyBwcm9qZWN0IGlzIGFkZGVkXHJcbiAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgbW92ZVByb2plY3QocHJvamVjdElkOiBzdHJpbmcsIG5ld1N0YXR1czogUHJvamVjdFN0YXR1cykge1xyXG4gICAgLy9maW5kIHRoZSBwcm9qZWN0IGJhc2VkIG9uIHByb2plY3QgaWRcclxuICAgIGNvbnN0IHByb2plY3QgPSB0aGlzLnByb2plY3RzLmZpbmQocHJqID0+IHByai5wcm9qZWN0SWQgPT09IHByb2plY3RJZCk7XHJcbiAgICAvL21vdmUgb25seSBpZiBwcm9qZWN0IHN0YXR1cyBpcyBjaGFuZ2VkXHJcbiAgICBpZiAocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XHJcbiAgICAgIC8vaWYgcHJvamVjdCBpcyBmb3VuZCBjaGFuZ2UgaXRzIHN0YXR1cyB0byBvbmUgc3VwcGxpZWRcclxuICAgICAgcHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiAgICAgIC8vY2FsbCBhbGwgbGlzdGVuZXIgZnVuY3Rpb25zIHdoZW5ldmVyIGEgcHJvamVjdCBpcyBtb3ZlZFxyXG4gICAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVMaXN0ZW5lcnMoKSB7XHJcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyRm4gb2YgdGhpcy5saXN0ZW5lcnMpIHtcclxuICAgICAgLy9jYWxsIGxpc3RlbmVyIGZ1bmN0aW9uIHBhc3NpbmcgdGhlIGNvcHkgb2YgcHJvamVjdHMgYXJyYXlcclxuICAgICAgbGlzdGVuZXJGbih0aGlzLnByb2plY3RzLnNsaWNlKCkpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5jb25zb2xlLmxvZygnUHJvamVjdCBTdGF0ZSBDcmVhdGVkJyk7XHJcbi8vR2xvYmFsIGNvbnN0YW50IHJlcHJlc2VudGluZyB0aGUgYXBwbGljYXRpb24gc3RhdGVcclxuZXhwb3J0IGNvbnN0IHByb2plY3RTdGF0ZSA9IFByb2plY3RTdGF0ZS5nZXRJbnN0YW5jZSgpO1xyXG4iLCIvL1ZhbGlkYXRhYmxlIEludGVyZmFjZVxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRhYmxlIHtcclxuICB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyO1xyXG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcclxuICBtaW5MZW5ndGg/OiBudW1iZXI7XHJcbiAgbWF4TGVuZ3RoPzogbnVtYmVyO1xyXG4gIG1pbj86IG51bWJlcjtcclxuICBtYXg/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8vdmFsaWRhdGUgZnVuY3Rpb25cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHZhbGlkYXRlYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKSB7XHJcbiAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gIC8vcmVxdWlyZWQgdmFsaWRhdGlvblxyXG4gIGlmICh2YWxpZGF0ZWJsZUlucHV0LnJlcXVpcmVkKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0ZWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuICB9XHJcbiAgLy92YWxpZGF0aW9ucyBmb3Igc3RyaW5nXHJcbiAgaWYgKHR5cGVvZiB2YWxpZGF0ZWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgLy9taW4gbGVuZ3RoIHZhbGlkYXRpb25cclxuICAgIGlmICh2YWxpZGF0ZWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsKSB7XHJcbiAgICAgIGlzVmFsaWQgPVxyXG4gICAgICAgIGlzVmFsaWQgJiYgdmFsaWRhdGVibGVJbnB1dC52YWx1ZS5sZW5ndGggPj0gdmFsaWRhdGVibGVJbnB1dC5taW5MZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvL21heCBsZW5ndGggdmFsaWRhdGlvblxyXG4gICAgaWYgKHZhbGlkYXRlYmxlSW5wdXQubWF4TGVuZ3RoICE9IG51bGwpIHtcclxuICAgICAgaXNWYWxpZCA9XHJcbiAgICAgICAgaXNWYWxpZCAmJiB2YWxpZGF0ZWJsZUlucHV0LnZhbHVlLmxlbmd0aCA8PSB2YWxpZGF0ZWJsZUlucHV0Lm1heExlbmd0aDtcclxuICAgIH1cclxuICB9XHJcbiAgLy92YWxpZGF0aW9ucyBmb3IgbnVtYmVyXHJcbiAgaWYgKHR5cGVvZiB2YWxpZGF0ZWJsZUlucHV0LnZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgLy9taW4gbGVuZ3RoIHZhbGlkYXRpb25cclxuICAgIGlmICh2YWxpZGF0ZWJsZUlucHV0Lm1pbiAhPSBudWxsKSB7XHJcbiAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRlYmxlSW5wdXQudmFsdWUgPj0gdmFsaWRhdGVibGVJbnB1dC5taW47XHJcbiAgICB9XHJcbiAgICAvL21heCBsZW5ndGggdmFsaWRhdGlvblxyXG4gICAgaWYgKHZhbGlkYXRlYmxlSW5wdXQubWF4ICE9IG51bGwpIHtcclxuICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGVibGVJbnB1dC52YWx1ZSA8PSB2YWxpZGF0ZWJsZUlucHV0Lm1heDtcclxuICAgIH1cclxuICB9XHJcbiAgLy9yZXR1cm4gZmluYWwgdmFsaWRhdGlvbiByZXN1bHRcclxuICByZXR1cm4gaXNWYWxpZDtcclxufVxyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL2Jhc2UtY29tcG9uZW50JztcclxuaW1wb3J0IHsgYXV0b2JpbmQgYXMgQXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kJztcclxuaW1wb3J0IHsgcHJvamVjdFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvcHJvamVjdC1zdGF0ZSc7XHJcbmltcG9ydCAqIGFzIFZhbGlkYXRpb24gZnJvbSAnLi4vdXRpbC92YWxpZGF0aW9uJztcclxuLy9Qcm9qZWN0IElucHV0IGNsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxGb3JtRWxlbWVudD4ge1xyXG4gIHRpdGxlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGRlc2NyaXB0aW9uSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIHBlb3BsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCdwcm9qZWN0LWlucHV0JywgJ2FwcCcsICdhZnRlcmJlZ2luJywgJ3VzZXItaW5wdXQnKTtcclxuXHJcbiAgICAvL2dldCBhY2Nlc3MgdG8gaW5wdXQgZWxlbWVudHNcclxuICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJyN0aXRsZSdcclxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJyNkZXNjcmlwdGlvbidcclxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIHRoaXMucGVvcGxlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcjcGVvcGxlJ1xyXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIC8vaGFuZGxlIHN1Ym1pdCBldmVudFxyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICB9XHJcbiAgcmVuZGVyQ29udGVudCgpIHt9XHJcbiAgQEF1dG9iaW5kXHJcbiAgcHJpdmF0ZSBzdWJtaXRIYW5kbGVyKGV2ZW50OiBFdmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vY2FsbCBnYXRoZXJVc2VySW5wdXQgdG8gZ2F0aGVyIHRoZSBkYXRhIHJlY2VpdmVkIGluIGZvcm0gYWZ0ZXIgdmFsaWRhdGlvblxyXG4gICAgY29uc3QgdXNlcklucHV0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHVzZXJJbnB1dCkpIHtcclxuICAgICAgLy9pZiBkYXRhIGlzIHVzZSBkZXN0cnVjdHVyaW5nIHRvIGdldCBpbmRpdmlzdWFsIHZhbHVlc1xyXG4gICAgICBjb25zdCBbdGl0bGUsIGRlc2NyaXB0aW9uLCBwZW9wbGVdID0gdXNlcklucHV0O1xyXG4gICAgICAvL3ByaW50IHZhbHVlcyB0byBjb25zb2xlXHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICd0aXRsZSBpcyA6ICcgK1xyXG4gICAgICAgICAgdGl0bGUgK1xyXG4gICAgICAgICAgJyBkZXNjcmlwdGlvbiBpcyA6ICcgK1xyXG4gICAgICAgICAgZGVzY3JpcHRpb24gK1xyXG4gICAgICAgICAgJyBubyBvZiBwZW9wbGUgaXMgOiAnICtcclxuICAgICAgICAgIHBlb3BsZVxyXG4gICAgICApO1xyXG4gICAgICAvL2FkZCBwcm9qZWN0IHRvIGdsb2JhbCBzdGF0ZVxyXG4gICAgICBwcm9qZWN0U3RhdGUuYWRkUHJvamVjdCh0aXRsZSwgZGVzY3JpcHRpb24sIHBlb3BsZSk7XHJcbiAgICB9XHJcbiAgICAvL2NsZWFyIHVzZXIgaW5wdXQgZnJvbSBmb3JtXHJcbiAgICB0aGlzLmNsZWFyVXNlcklucHV0KCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgY2xlYXJVc2VySW5wdXQoKSB7XHJcbiAgICAvL2NsZWFyIHRoZSBlbnRlcmVkIHZhbHVlcyBmcm9tIHRoZSBmb3JtXHJcbiAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcbiAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG4gIH1cclxuICBwcml2YXRlIGdhdGhlclVzZXJJbnB1dCgpOiBbc3RyaW5nLCBzdHJpbmcsIG51bWJlcl0gfCB2b2lkIHtcclxuICAgIC8vZmV0Y2ggdXNlciBpbnB1dCBmcm9tIGlucHV0RWxlbWVudHNcclxuICAgIGNvbnN0IHRpdGxlSW5wdXQgPSB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlO1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICBjb25zdCBwZW9wbGVJbnB1dCA9IHRoaXMucGVvcGxlSW5wdXRFbGVtZW50LnZhbHVlO1xyXG5cclxuICAgIC8vQ3JlYXRlIHZhbGlkYXRhYmFsZSBvYmplY3RzIGZvciB1c2VyIGlucHV0c1xyXG4gICAgY29uc3QgdmFsaWRhdGFibGVUaXRsZTogVmFsaWRhdGlvbi5WYWxpZGF0YWJsZSA9IHtcclxuICAgICAgdmFsdWU6IHRpdGxlSW5wdXQsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgY29uc3QgdmFsaWRhdGFibGVEZXNjcmlwdGlvbjogVmFsaWRhdGlvbi5WYWxpZGF0YWJsZSA9IHtcclxuICAgICAgdmFsdWU6IGRlc2NyaXB0aW9uSW5wdXQsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICBtaW5MZW5ndGg6IDVcclxuICAgIH07XHJcbiAgICBjb25zdCB2YWxpZGF0YWJsZVBlb3BsZTogVmFsaWRhdGlvbi5WYWxpZGF0YWJsZSA9IHtcclxuICAgICAgdmFsdWU6ICtwZW9wbGVJbnB1dCxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbjogMSxcclxuICAgICAgbWF4OiA1XHJcbiAgICB9O1xyXG4gICAgLy92YWxpZGF0ZSB0aGUgaW5wdXQgYnkgY2FsbGluZyB2YWxpZGF0ZSBmdW5jdGlvblxyXG4gICAgaWYgKFxyXG4gICAgICAhVmFsaWRhdGlvbi52YWxpZGF0ZSh2YWxpZGF0YWJsZVRpdGxlKSB8fFxyXG4gICAgICAhVmFsaWRhdGlvbi52YWxpZGF0ZSh2YWxpZGF0YWJsZURlc2NyaXB0aW9uKSB8fFxyXG4gICAgICAhVmFsaWRhdGlvbi52YWxpZGF0ZSh2YWxpZGF0YWJsZVBlb3BsZSlcclxuICAgICkge1xyXG4gICAgICAvL3Nob3cgYWxlcnQgZm9yIGludmFsaWQgaW5wdXRcclxuICAgICAgYWxlcnQoJ0ludmFsaWQgaW5wdXQgcGxlYXNlIHRyeSBhZ2FpbiEhISEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vcmV0dXJuIHR1cGxlIGlmIGlucHV0IGlzIHZhbGlkXHJcbiAgICAgIHJldHVybiBbdGl0bGVJbnB1dCwgZGVzY3JpcHRpb25JbnB1dCwgK3Blb3BsZUlucHV0XTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbmZpZ3VyZSgpIHtcclxuICAgIC8vaGFuZGxlIHN1Ym1pdCBldmVudCBvZiBmb3JtXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kJztcclxuaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSAnLi4vbW9kZWxzL2RyYWctZHJvcCc7XHJcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xyXG5cclxuLy9Qcm9qZWN0SXRlbSBjbGFzcyB0byBhZGQgYSBpdGVtIHRvIGxpc3RcclxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtXHJcbiAgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTFVMaXN0RWxlbWVudCwgSFRNTExJRWxlbWVudD5cclxuICBpbXBsZW1lbnRzIERyYWdnYWJsZSB7XHJcbiAgLy9GaWVsZCB0byBob2xkIHRoZSBwcm9qZWN0IHRvIHJlbmRlclxyXG4gIHByaXZhdGUgcHJvamVjdDogUHJvamVjdDtcclxuICBnZXQgcGVyc29ucygpIHtcclxuICAgIGlmICh0aGlzLnByb2plY3QubnVtT2ZQZW9wbGUgPT09IDEpIHtcclxuICAgICAgcmV0dXJuICcxIHBlcnNvbic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gYCR7dGhpcy5wcm9qZWN0Lm51bU9mUGVvcGxlfSBwZXJzb25zYDtcclxuICAgIH1cclxuICB9XHJcbiAgLy9Db25zdHJ1Y3RvclxyXG4gIGNvbnN0cnVjdG9yKGhvc3RJZDogc3RyaW5nLCBwcm9qZWN0OiBQcm9qZWN0KSB7XHJcbiAgICBzdXBlcignc2luZ2xlLXByb2plY3QnLCBob3N0SWQsICdiZWZvcmVlbmQnLCBwcm9qZWN0LnByb2plY3RJZCk7XHJcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG4gICAgLy9jYWxsIGNvbmZpZ3VyZSBtZXRob2RcclxuICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgICAvL2NhbGwgcmVuZGVyY29udGVudCBtZXRob2RcclxuICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gIH1cclxuICBAYXV0b2JpbmRcclxuICBkcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgIC8vc2V0IGRhdGEgdG8gYmUgdHJhbnNmZXJlZFxyXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyIS5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGhpcy5wcm9qZWN0LnByb2plY3RJZCk7XHJcbiAgICAvL3NldCB0aGUgYWxsb3dlZCBlZmZlY3QgdG8gbW92ZSB0byBzaWduaWZ5IHRoZSBpbnRlbnQgb2YgbW92aW5nIHRoZSBpdGVtIGZvciBjdXJzb3IgY2hhbmdlcyBvbiB1aVxyXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyIS5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xyXG4gIH1cclxuICBkcmFnRW5kSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygnZHJhZyBlbmQnLCBldmVudCk7XHJcbiAgfVxyXG4gIGNvbmZpZ3VyZSgpOiB2b2lkIHtcclxuICAgIC8vYWRkIGV2ZW50IGxpc3RlbmVyIHRvIGxpc3RlbiB0byBkcmFnc3RhcnQgZXZlbnRcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydEhhbmRsZXIpO1xyXG4gIH1cclxuICByZW5kZXJDb250ZW50KCk6IHZvaWQge1xyXG4gICAgLy9zZWxlY3QgZWxlbWVudHMgYW5kIHNldCBwcm9qZWN0IGRldGFpbHNcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC50aXRsZTtcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMycpIS50ZXh0Q29udGVudCA9IHRoaXMucGVyc29ucyArICcgYXNzaWduZWQnO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AnKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZCc7XHJcbmltcG9ydCB7IERyYWdUYXJnZXQgfSBmcm9tICcuLi9tb2RlbHMvZHJhZy1kcm9wJztcclxuaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdFN0YXR1cyB9IGZyb20gJy4uL21vZGVscy9wcm9qZWN0JztcclxuaW1wb3J0IHsgcHJvamVjdFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvcHJvamVjdC1zdGF0ZSc7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gJy4vcHJvamVjdC1pdGVtJztcclxuXHJcbi8vUHJvamVjdCBMaXN0IGNsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0TGlzdFxyXG4gIGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRWxlbWVudD5cclxuICBpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xyXG4gIGFzc2lnbmVkUHJvamVjdHM6IFByb2plY3RbXTtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHR5cGU6ICdhY3RpdmUnIHwgJ2ZpbmlzaGVkJykge1xyXG4gICAgc3VwZXIoJ3Byb2plY3QtbGlzdCcsICdhcHAnLCAnYmVmb3JlZW5kJywgYCR7dHlwZX0tcHJvamVjdHNgKTtcclxuICAgIC8vc2V0IGFzc2lnbmVkIHByb2plY3RzIHRvIGFuIGVtcHR5IGFycmF5XHJcbiAgICB0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSBbXTtcclxuICAgIC8vYWRkIGEgbGlzdGVuZXIgdG8gcHJvamVjdCBzdGF0ZVxyXG4gICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgIC8vcmVuZGVyIGRhdGFcclxuICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gIH1cclxuICBAYXV0b2JpbmRcclxuICBkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgLy9jaGVjayBpZiB3ZSBuZWVkIHRvIGFsbG93IHRoZSBkcm9wXHJcbiAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XHJcbiAgICAgIC8vYWxsb3cgdGhlIGRyb3BcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgLy9GZXRjaCB0aGUgdWwgZWxlbWVudFxyXG4gICAgICBjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XHJcbiAgICAgIC8vYWRkIGRyb3BwYWJsZSBjbGFzcyB0byBjaGFuZ2UgdWkgb24gZHJhZyBvdmVyXHJcbiAgICAgIGxpc3RFbC5jbGFzc0xpc3QuYWRkKCdkcm9wcGFibGUnKTtcclxuICAgIH1cclxuICB9XHJcbiAgQGF1dG9iaW5kXHJcbiAgZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgcHJvamVjdElkID0gZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XHJcbiAgICBwcm9qZWN0U3RhdGUubW92ZVByb2plY3QoXHJcbiAgICAgIHByb2plY3RJZCxcclxuICAgICAgdGhpcy50eXBlID09PSAnYWN0aXZlJyA/IFByb2plY3RTdGF0dXMuQWN0aXZlIDogUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxyXG4gICAgKTtcclxuICAgIC8vRmV0Y2ggdGhlIHVsIGVsZW1lbnRcclxuICAgIGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpITtcclxuICAgIC8vcmVtb3ZlIHRoZSBkcm9wcGFibGUgY2xhc3MgdG8gcmV2ZXJ0IHVpIGNoYW5nZXMgYWZ0ZXIgZHJvcCBlbmRcclxuICAgIGxpc3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGFibGUnKTtcclxuICB9XHJcbiAgQGF1dG9iaW5kXHJcbiAgZHJhZ0xlYXZlSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XHJcbiAgICAvL0ZldGNoIHRoZSB1bCBlbGVtZW50XHJcbiAgICBjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XHJcbiAgICAvL3JlbW92ZSB0aGUgZHJvcHBhYmxlIGNsYXNzIHRvIHJldmVydCB1aSBjaGFuZ2VzIG9uIGRyYWcgbGVhdmVcclxuICAgIGxpc3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGFibGUnKTtcclxuICB9XHJcbiAgLy9hZGQgbGlzdGVuZXIgbG9naWMgbm93IHJlc2lkZXMgaW4gY29uZmlndXJlXHJcbiAgY29uZmlndXJlKCkge1xyXG4gICAgLy9hZGQgbGlzdGVuZXJzIGZvciBkcmFnIGRyb3AgZXZlbnRzXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVySGFuZGxlcik7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIpO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XHJcbiAgICAvL2FkZCBhIGxpc3RlbmVyIHRvIHByb2plY3Qgc3RhdGVcclxuICAgIHByb2plY3RTdGF0ZS5hZGRMaXN0ZW5lcigocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xyXG4gICAgICAvL2ZpbHRlciB0aGUgcHJvamVjdHMgbGlzdCBiYXNlZCBvbiBzdGF0dXNcclxuICAgICAgY29uc3QgcmVsZXZhbnRQcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihwcmogPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdhY3RpdmUnKSB7XHJcbiAgICAgICAgICByZXR1cm4gcHJqLnN0YXR1cyA9PT0gUHJvamVjdFN0YXR1cy5BY3RpdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkZpbmlzaGVkO1xyXG4gICAgICB9KTtcclxuICAgICAgLy9zYXZlIHJlbGV2YW50IGFycmF5IHRvIGFzc2lnbmVkUHJvamVjdHNcclxuICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcmVsZXZhbnRQcm9qZWN0cztcclxuICAgICAgLy9jYWxsIG1ldGhvZCB0byByZW5kZXIgYWxsIHByb2plY3RzIHRvIGxpc3RcclxuICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vbWV0aG9kIHRvIHJlbmRlciBwcm9qZWN0cyB0byBsaXN0XHJcbiAgcHJpdmF0ZSByZW5kZXJQcm9qZWN0cygpIHtcclxuICAgIC8vZmV0Y2ggdGhlIGxpc3RcclxuICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGBcclxuICAgICkhIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbiAgICAvL2NsZWFyIGFscmVhZHkgcmVuZGVyZWQgaXRlbXNcclxuICAgIGxpc3RFbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgLy9sb29wIHRocm91Z2ggYWxsIHRoZSBwcm9qZWN0c1xyXG4gICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG4gICAgICAvL2luc3RhbnRpYXRlIG5ldyBQcm9qZWN0SXRlbSB0byByZW5kZXIgdG8gbGlzdFxyXG4gICAgICBuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkLCBwcm9qZWN0KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmVuZGVyQ29udGVudCgpIHtcclxuICAgIC8vQ3JlYXRlIGlkIGZvciB1bCBkeW5hbWljYWxseSBiYXNlZCBvbiB0aGUgdHlwZSBvZiBwcm9qZWN0XHJcbiAgICBjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xyXG4gICAgLy9mZXRjaCB0aGUgdWwgdGFnIGFuZCBhZGQgdGhpcyBpZCB0byBpdFxyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkID0gbGlzdElkO1xyXG4gICAgLy9mZXRjaCB0aGUgaDIgdGFnIGFuZCBzZXQgaXRzIHZhbHVlIGR5bmFtaWNhbGx5IGJhc2VkIG9uIHRoZSB0eXBlIG9mIHByb2plY3RcclxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMudHlwZS50b1VwcGVyQ2FzZSgpICsgJyBQUk9KRUNUUyc7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3RJbnB1dCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWlucHV0JztcclxuaW1wb3J0IHsgUHJvamVjdExpc3QgfSBmcm9tICcuL2NvbXBvbmVudHMvcHJvamVjdC1saXN0JztcclxuXHJcbm5ldyBQcm9qZWN0SW5wdXQoKTtcclxubmV3IFByb2plY3RMaXN0KCdhY3RpdmUnKTtcclxubmV3IFByb2plY3RMaXN0KCdmaW5pc2hlZCcpO1xyXG5jb25zb2xlLmxvZygpO1xyXG5jb25zb2xlLmxvZygnaGV5YWFhYWFhYWEhISEhISEhJyk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=